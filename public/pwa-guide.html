<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guide PWA - Klipper Overlay</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%2322d3ee' width='100' height='100'/><text x='50' y='50' font-size='60' fill='white' text-anchor='middle' dominant-baseline='central'>âš™ï¸</text></svg>">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
      color: #e0e6ed;
      line-height: 1.6;
    }

    .header {
      background: linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%);
      color: #0a0e27;
      padding: 40px 20px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(34, 211, 238, 0.2);
    }

    .header h1 {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 16px;
      opacity: 0.9;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .section {
      background: #161b22;
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 30px;
      border-left: 4px solid #22d3ee;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .section h2 {
      color: #22d3ee;
      margin-bottom: 20px;
      font-size: 24px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section h3 {
      color: #34d399;
      margin-top: 20px;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .step {
      background: #0a0e27;
      padding: 15px;
      margin: 10px 0;
      border-radius: 6px;
      border-left: 3px solid #34d399;
    }

    .step strong {
      color: #22d3ee;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .feature-card {
      background: #0a0e27;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #22d3ee;
      text-align: center;
    }

    .feature-card .icon {
      font-size: 40px;
      margin-bottom: 10px;
    }

    .feature-card h4 {
      color: #22d3ee;
      margin-bottom: 10px;
    }

    .code-block {
      background: #0a0e27;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 12px;
      color: #22d3ee;
      border-left: 3px solid #f59e0b;
      margin: 10px 0;
    }

    .button {
      display: inline-block;
      background: #22d3ee;
      color: #0a0e27;
      padding: 12px 24px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      margin: 10px 10px 10px 0;
      transition: all 0.3s ease;
    }

    .button:hover {
      background: #06b6d4;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(34, 211, 238, 0.3);
    }

    .button.secondary {
      background: transparent;
      border: 2px solid #22d3ee;
      color: #22d3ee;
    }

    .button.secondary:hover {
      background: rgba(34, 211, 238, 0.1);
    }

    .warning {
      background: rgba(245, 158, 11, 0.1);
      border-left: 4px solid #f59e0b;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
    }

    .success {
      background: rgba(52, 211, 153, 0.1);
      border-left: 4px solid #34d399;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
    }

    .info {
      background: rgba(34, 211, 238, 0.1);
      border-left: 4px solid #22d3ee;
      padding: 15px;
      border-radius: 6px;
      margin: 15px 0;
    }

    .qr-section {
      text-align: center;
      margin: 30px 0;
    }

    .qr-section img {
      max-width: 300px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(34, 211, 238, 0.2);
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 24px;
      }

      .container {
        padding: 20px 15px;
      }

      .section {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ğŸ“± Guide PWA - Klipper Overlay</h1>
    <p>Installez l'application sur votre tÃ©lÃ©phone ou ordinateur</p>
  </div>

  <div class="container">
    <!-- Section 1: Qu'est-ce qu'une PWA -->
    <div class="section">
      <h2>â“ Qu'est-ce qu'une PWA ?</h2>
      <p>Une Progressive Web App (PWA) est une application web qui peut Ãªtre installÃ©e comme une application native sur votre appareil. Klipper Overlay est une PWA, ce qui signifie:</p>
      
      <div class="feature-grid">
        <div class="feature-card">
          <div class="icon">âš¡</div>
          <h4>Rapide</h4>
          <p>Chargement instantanÃ© et rÃ©actif</p>
        </div>
        <div class="feature-card">
          <div class="icon">ğŸ“´</div>
          <h4>Hors ligne</h4>
          <p>Fonctionne sans connexion Internet</p>
        </div>
        <div class="feature-card">
          <div class="icon">ğŸ””</div>
          <h4>Notifications</h4>
          <p>Alertes en temps rÃ©el</p>
        </div>
        <div class="feature-card">
          <div class="icon">ğŸ </div>
          <h4>Accueil</h4>
          <p>IcÃ´ne sur l'Ã©cran d'accueil</p>
        </div>
      </div>
    </div>

    <!-- Section 2: Installation Mobile -->
    <div class="section">
      <h2>ğŸ“± Installation sur Mobile (iOS/Android)</h2>
      
      <h3>Android (Chrome, Firefox, etc.)</h3>
      <div class="step">
        <strong>1.</strong> Ouvrez <code>http://your-printer-ip:8080/webcam</code> sur votre tÃ©lÃ©phone
      </div>
      <div class="step">
        <strong>2.</strong> Appuyez sur le menu (â‹®) en haut Ã  droite
      </div>
      <div class="step">
        <strong>3.</strong> SÃ©lectionnez <strong>"Installer l'application"</strong> ou <strong>"Ajouter Ã  l'Ã©cran d'accueil"</strong>
      </div>
      <div class="step">
        <strong>4.</strong> Confirmez en appuyant sur <strong>"Installer"</strong>
      </div>
      <div class="success">
        âœ… L'application apparaÃ®t maintenant sur votre Ã©cran d'accueil !
      </div>

      <h3>iPhone/iPad (Safari)</h3>
      <div class="step">
        <strong>1.</strong> Ouvrez <code>http://your-printer-ip:8080/webcam</code> sur Safari
      </div>
      <div class="step">
        <strong>2.</strong> Appuyez sur <strong>Partager</strong> (carrÃ© avec flÃ¨che)
      </div>
      <div class="step">
        <strong>3.</strong> SÃ©lectionnez <strong>"Sur l'Ã©cran d'accueil"</strong>
      </div>
      <div class="step">
        <strong>4.</strong> Entrez un nom et appuyez sur <strong>"Ajouter"</strong>
      </div>
      <div class="success">
        âœ… L'application est maintenant accessible depuis votre Ã©cran d'accueil !
      </div>
    </div>

    <!-- Section 3: Installation Desktop -->
    <div class="section">
      <h2>ğŸ’» Installation sur Desktop</h2>
      
      <h3>Chrome / Edge / Brave</h3>
      <div class="step">
        <strong>1.</strong> Ouvrez <code>http://your-printer-ip:8080/webcam</code>
      </div>
      <div class="step">
        <strong>2.</strong> Regardez la barre d'adresse - une <strong>icÃ´ne d'installation</strong> (âŠâ†“) devrait s'afficher
      </div>
      <div class="step">
        <strong>3.</strong> Cliquez sur l'icÃ´ne d'installation
      </div>
      <div class="step">
        <strong>4.</strong> Confirmez le nom de l'application et cliquez <strong>"Installer"</strong>
      </div>
      <div class="step">
        <strong>Alternativement :</strong> Menu â‹® â†’ <strong>"Installer Klipper Overlay"</strong>
      </div>
      <div class="success">
        âœ… L'application s'ouvre maintenant dans sa propre fenÃªtre !
      </div>

      <h3>Firefox</h3>
      <div class="info">
        Firefox supporte les PWA via le menu. Menu â˜° â†’ <strong>"Installer Klipper Overlay"</strong>
      </div>
    </div>

    <!-- Section 4: FonctionnalitÃ©s -->
    <div class="section">
      <h2>âœ¨ FonctionnalitÃ©s Disponibles</h2>
      
      <h3>âœ… Fonctionne Hors Ligne</h3>
      <p>Les pages suivantes sont cachÃ©es automatiquement pour fonctionner sans Internet :</p>
      <ul>
        <li>ğŸ“º Page webcam (/webcam)</li>
        <li>ğŸ“Š Overlay de status (/overlay)</li>
        <li>ğŸ¨ Feuilles de styles (CSS)</li>
        <li>âš™ï¸ Scripts JavaScript</li>
      </ul>
      <div class="warning">
        âš ï¸ <strong>Attention :</strong> Le flux vidÃ©o en direct et les donnÃ©es de statut en temps rÃ©el nÃ©cessitent une connexion Internet active.
      </div>

      <h3>ğŸ’¾ Sauvegarde Locale</h3>
      <p>Les donnÃ©es suivantes sont sauvegardÃ©es sur votre appareil :</p>
      <ul>
        <li>ğŸ“œ Historique des impressions</li>
        <li>âš™ï¸ ParamÃ¨tres de l'overlay</li>
        <li>ğŸ¨ PrÃ©fÃ©rences d'affichage</li>
      </ul>

      <h3>ğŸ”” Notifications</h3>
      <p>Recevez des notifications quand :</p>
      <ul>
        <li>L'impression se termine âœ“</li>
        <li>Une erreur se produit âœ•</li>
        <li>L'imprimante se connecte/dÃ©connecte</li>
      </ul>
    </div>

    <!-- Section 5: Utilisation -->
    <div class="section">
      <h2>ğŸ® Comment Utiliser</h2>
      
      <h3>Navigation</h3>
      <p>Une fois installÃ©e, l'application fonctionne comme une app native :</p>
      <ul>
        <li>Pas de barre d'adresse (interface Ã©purÃ©e)</li>
        <li>AccÃ¨s rapide depuis l'Ã©cran d'accueil</li>
        <li>Boutons back/forward du systÃ¨me</li>
        <li>Gestes tactiles natifs (pinch-zoom, swipe)</li>
      </ul>

      <h3>Historique des Impressions</h3>
      <div class="step">
        1. Cliquez sur <strong>ğŸ“œ Historique</strong> dans l'overlay
      </div>
      <div class="step">
        2. Consultez vos statistiques (total, taux de rÃ©ussite, temps total)
      </div>
      <div class="step">
        3. Visualisez la liste complÃ¨te de vos impressions passÃ©es
      </div>
      <div class="info">
        ğŸ’¡ Les donnÃ©es d'historique sont sauvegardÃ©es localement sur votre appareil
      </div>

      <h3>Zoom et Affichage</h3>
      <ul>
        <li>ğŸ” <strong>Zoom :</strong> Pinch sur mobile, ou boutons + / -</li>
        <li>â›¶ <strong>Plein Ã©cran :</strong> Cliquez le bouton ğŸ”²</li>
        <li>ğŸ“ <strong>ParamÃ¨tres :</strong> Menu de configuration disponible</li>
      </ul>
    </div>

    <!-- Section 6: DÃ©pannage -->
    <div class="section">
      <h2>ğŸ”§ DÃ©pannage</h2>
      
      <h3>âŒ L'app ne s'installe pas</h3>
      <div class="warning">
        Assurez-vous que :
        <ul>
          <li>âœ“ Vous utilisez HTTPS ou localhost</li>
          <li>âœ“ Le navigateur supporte les PWA</li>
          <li>âœ“ La page manifest.json est valide</li>
          <li>âœ“ Les icÃ´nes d'app sont prÃ©sentes</li>
        </ul>
      </div>

      <h3>âŒ Les donnÃ©es d'historique ne se sauvegardent pas</h3>
      <div class="warning">
        <ul>
          <li>âœ“ VÃ©rifiez que localStorage n'est pas dÃ©sactivÃ©</li>
          <li>âœ“ VÃ©rifiez l'espace disponible sur l'appareil</li>
          <li>âœ“ En mode privÃ©/incognito, les donnÃ©es ne sont pas persistantes</li>
        </ul>
      </div>

      <h3>âŒ Le webcam/status ne charge pas hors ligne</h3>
      <div class="info">
        C'est normal ! Les donnÃ©es en temps rÃ©el nÃ©cessitent Internet. Seules les pages statiques fonctionnent hors ligne.
      </div>

      <h3>RÃ©initialiser l'Application</h3>
      <div class="step">
        <strong>1.</strong> Supprimez l'application (Ã©cran d'accueil ou paramÃ¨tres)
      </div>
      <div class="step">
        <strong>2.</strong> Videz le cache du navigateur ou le cache de l'application
      </div>
      <div class="step">
        <strong>3.</strong> RÃ©installez depuis <code>http://your-printer-ip:8080/webcam</code>
      </div>
    </div>

    <!-- Section 7: Personnalisation -->
    <div class="section">
      <h2>ğŸ¨ Personnalisation</h2>
      
      <p>Vous pouvez personnaliser votre PWA en Ã©ditant le fichier <code>manifest.json</code> :</p>
      
      <div class="code-block">
{
  "name": "Klipper Overlay",
  "theme_color": "#22d3ee",
  "background_color": "#0a0e27",
  "icons": [
    { "src": "/icon-192.png", "sizes": "192x192" },
    { "src": "/icon-512.png", "sizes": "512x512" }
  ]
}
      </div>

      <h3>Changer la Couleur ThÃ¨me</h3>
      <p>Modifiez <code>theme_color</code> pour changer la couleur d'en-tÃªte :</p>
      <ul>
        <li>Cyan actuel : <code>#22d3ee</code></li>
        <li>Rouge : <code>#f43f5e</code></li>
        <li>Vert : <code>#34d399</code></li>
        <li>Orange : <code>#f59e0b</code></li>
      </ul>

      <h3>Changer les IcÃ´nes</h3>
      <p>Remplacez les fichiers <code>/public/icon-192.png</code> et <code>/public/icon-512.png</code> par vos propres icÃ´nes.</p>
    </div>

    <!-- Section 8: Raccourcis -->
    <div class="section">
      <h2>âŒ¨ï¸ Raccourcis Clavier</h2>
      
      <table style="width: 100%; border-collapse: collapse;">
        <tr>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;"><strong>Escape</strong></td>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;">Fermer la modal d'historique</td>
        </tr>
        <tr>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;"><strong>H</strong></td>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;">Afficher/Masquer la sidebar</td>
        </tr>
        <tr>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;"><strong>F</strong></td>
          <td style="padding: 10px; border-bottom: 1px solid #22d3ee;">Plein Ã©cran (Fullscreen)</td>
        </tr>
        <tr>
          <td style="padding: 10px;"><strong>+/-</strong></td>
          <td style="padding: 10px;">Zoomer / DÃ©zommer</td>
        </tr>
      </table>
    </div>

    <!-- Section 9: Liens Utiles -->
    <div class="section">
      <h2>ğŸ”— AccÃ¨s Rapide</h2>
      
      <a href="/" class="button">ğŸ  Accueil</a>
      <a href="/webcam" class="button">ğŸ“º Webcam</a>
      <a href="/overlay" class="button">ğŸ“Š Overlay</a>
      <a href="/test-history.html" class="button">ğŸ§ª Test Historique</a>
      
      <div class="info" style="margin-top: 30px;">
        ğŸ’¡ Pensez Ã  remplacer <code>your-printer-ip</code> par l'adresse IP rÃ©elle de votre imprimante
      </div>
    </div>
  </div>

  <script>
    // Afficher l'IP locale pour les tests
    console.log('IP Locale: http://localhost:8080');
    console.log('Les URLs Ã  utiliser:');
    console.log('  - http://your-printer-ip:8080/webcam');
    console.log('  - http://your-printer-ip:8080/overlay');
  </script>
</body>
</html>
